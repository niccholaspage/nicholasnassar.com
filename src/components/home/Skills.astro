---
import { skills } from "../../data/skills";

const skillsWithIcons = await Promise.all(
  skills.map(async (skill) => {
    const image = `/images/technologies/${skill.image.toLowerCase()}.svg`;

    return { ...skill, image };
  })
);
---

<div
  class="-mx-4 max-w-2xl grid [--s:44px] sm:[--s:64px] [--r:1] [--h:0.25] [--v:0.35] [--hc:calc(clamp(0,var(--h),0.5)*var(--s))] [--vc:calc(clamp(0,var(--v),0.5)*var(--s)*var(--r))] [--mv:12px] [--mh:calc(var(--mv)+(var(--s)-2*var(--hc))/2)] [--f:calc(2*var(--s)*var(--r)+4*var(--mv)-2*var(--vc)-2px)]"
>
  <div
    class="text-[0] pb-[calc(var(--s)*var(--r)+var(--mv))] before:content-[''] before:w-[calc(var(--s)/2+var(--mh))] before:float-left before:h-[140%] before:[shape-outside:repeating-linear-gradient(#0000_0_calc(var(--f)-2px),#000_0_var(--f))]"
  >
    {
      skillsWithIcons.map((skill) => (
        <div class="w-(--s) m-[var(--mv)_var(--mh)] h-[calc(var(--s)*var(--r))] inline-block text-[length:initial] mb-[calc(var(--mv)-var(--vc))]">
          <a class="group" href={skill.link} target="_blank" title={skill.name}>
            <img
              loading="lazy"
              alt={`${skill.name} logo`}
              class="group-hover:scale-125 ease-in-out duration-200"
              src={skill.image}
            />
          </a>
        </div>
      ))
    }
  </div>
</div>
